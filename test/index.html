<!DOCTYPE html>
<html>
    <body style="margin: 0px; overflow: hidden;">
        <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
        <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
        <a-scene id="main-scene" embedded arjs="detectionMode: color_and_matrix; matrixCodeType: 3x3_HAMMING63;">
			<a-marker type="barcode" value="0">
				<a-entity
				position="0 0 0"
				scale="0.05 0.05 0.05"
				gltf-model="../models/1.glb"
				></a-entity>

				<!-- From https://onlinesound.net/8bit-sfx-generator -->
				<a-entity class="sound-on-marker-found" sound="src: url(../sounds/pickupCoin.wav); autoplay: false">
				</a-entity>
			</a-marker>
			<a-marker type="barcode" value="1">
				<a-entity
				position="0 0 0"
				scale="0.05 0.05 0.05"
				gltf-model="../models/2.glb"
				></a-entity>
			</a-marker>
			<a-marker type="barcode" value="2">
				<a-entity
				position="0 0 0"
				scale="0.05 0.05 0.05"
				gltf-model="../models/3.glb"
				></a-entity>
			</a-marker>
			<a-entity camera></a-entity>
        </a-scene>
		<script>
			(() => {
				function attachSoundsToMarker(marker) {
					const sounds = marker.querySelectorAll(":scope > a-entity.sound-on-marker-found");

					marker.addEventListener("markerFound", () => {
						console.log("Marker found:", marker);
						for (const sound of sounds) {
							sound.components.sound.playSound();
						}
					});
				}

				const markers = document.querySelectorAll("#main-scene > a-marker");

				for (const marker of markers) {
					attachSoundsToMarker(marker);
				}
			})();
		</script>
    </body>
</html>
